graph TD

  runLiveMarketScannerTask["ğŸŸ¢ <b>runLiveMarketScannerTask()</b><br/>ğŸ—ï¸ <b>Function</b> | ğŸŸ¢ <b>public</b><br/><b>Input:</b> None<br/><b>Output:</b> Promise&lt;void&gt;<br/><i>Main entrypoint: scan, notify, sort, tag, rank, stream</i>"]:::mainnode

  MarketQuoteScanner["ğŸ“ˆ <b>MarketQuoteScanner</b><br/>ğŸ›ï¸ <b>Class</b><br/><b>Input:</b> { vendor, marketSession, strategyKeys }<br/><b>Output:</b> MarketQuoteScanner instance<br/><i>Scans and filters quote data</i>"]:::classnode

  NotifierService["ğŸ”” <b>NotifierService</b><br/>ğŸ›ï¸ <b>Class</b><br/><b>Input:</b> TelegramNotifier<br/><b>Output:</b> NotifierService instance<br/><i>Sends notifications via adapter</i>"]:::classnode

  LeaderboardService["ğŸ† <b>LeaderboardService</b><br/>ğŸ›ï¸ <b>Class</b><br/><b>Input:</b> storage, scoringFn<br/><b>Output:</b> LeaderboardService instance<br/><i>Handles ranking logic</i>"]:::classnode

  EodhdWebSocketClient["ğŸŒ <b>EodhdWebSocketClient</b><br/>ğŸ›ï¸ <b>Class</b><br/><b>Input:</b> apiKey, tickers[], callback<br/><b>Output:</b> WebSocketClient instance<br/><i>Streams live tickers</i>"]:::classnode

  NormalizedRestTickerSnapshot["ğŸ“Š <b>NormalizedRestTickerSnapshot</b><br/>ğŸ·ï¸ <b>Type</b><br/><b>Output:</b> Snapshot[]"]:::typenode

  SortedNormalizedTickerSnapshot["ğŸ… <b>SortedNormalizedTickerSnapshot</b><br/>ğŸ·ï¸ <b>Type</b><br/><b>Output:</b> RankedSnapshot[]"]:::typenode

  ITaggedLeaderboardSnapshotsBatch["ğŸ“˜ <b>ITaggedLeaderboardSnapshotsBatch</b><br/>ğŸ·ï¸ <b>Type</b><br/><b>Output:</b> { strategy_tag: string, tickers: Snapshot[] }"]:::typenode

  SortOrder["ğŸ”¢ <b>SortOrder</b><br/>ğŸ·ï¸ <b>Enum</b><br/><b>Output:</b> 'asc' | 'desc'"]:::typenode

  scanMarketTickers["ğŸ” <b>scanMarketTickers()</b><br/>ğŸ§© <b>Async Function</b><br/><b>Output:</b> string[]<br/><i>Fetches matching symbols</i>"]:::util
  notifyScanResult["ğŸ”” <b>notifyScanResult()</b><br/>ğŸ§© <b>Async Function</b><br/><b>Output:</b> Promise&lt;void&gt;<br/><i>Sends Telegram scan alert</i>"]:::util
  addTagsToMarketScanResult["ğŸ·ï¸ <b>tagResults()</b><br/>ğŸ§© <b>Function</b><br/><b>Output:</b> ITaggedLeaderboardSnapshotsBatch"]:::util
  addRankFields["ğŸ… <b>addRankFields()</b><br/>ğŸ§© <b>Function</b><br/><b>Output:</b> SortedNormalizedTickerSnapshot[]"]:::util
  buildScreenerConfigs["ğŸ” <b>buildScreenerConfigs()</b><br/>ğŸ§© <b>Function</b><br/><b>Output:</b> FilterConfig[]"]:::util
  getCurrentMarketSession["ğŸ•’ <b>getCurrentMarketSession()</b><br/>ğŸ§© <b>Function</b><br/><b>Output:</b> MarketSession"]:::util
  composeScanStrategyTag["ğŸ·ï¸ <b>composeTag()</b><br/>ğŸ§© <b>Function</b><br/><b>Output:</b> string"]:::util
  processLeaderboard["ğŸ <b>processLeaderboard()</b><br/>ğŸ§© <b>Async Function</b><br/><b>Output:</b> Promise&lt;void&gt;"]:::util
  setupWebSocketClient["ğŸŒ <b>setupWebSocketClient()</b><br/>ğŸ§© <b>Function</b><br/><b>Output:</b> EodhdWebSocketClient"]:::util

  %% Edges
  runLiveMarketScannerTask --> getCurrentMarketSession
  runLiveMarketScannerTask --> scanMarketTickers
  runLiveMarketScannerTask --> notifyScanResult
  runLiveMarketScannerTask --> composeScanStrategyTag
  runLiveMarketScannerTask --> addTagsToMarketScanResult
  runLiveMarketScannerTask --> addRankFields
  runLiveMarketScannerTask --> processLeaderboard
  runLiveMarketScannerTask --> setupWebSocketClient

  scanMarketTickers --> MarketQuoteScanner
  scanMarketTickers --> buildScreenerConfigs

  notifyScanResult --> NotifierService
  NotifierService --> NormalizedRestTickerSnapshot

  addRankFields --> SortedNormalizedTickerSnapshot
  processLeaderboard --> LeaderboardService
  setupWebSocketClient --> EodhdWebSocketClient

  %% Styling
  classDef mainnode stroke:#000,stroke-width:5px,fill:#a7f6ff;
  classDef classnode stroke:#000,stroke-width:3px,fill:#ffb6e6;
  classDef typenode fill:#e0e0e0,stroke-dasharray: 5, 5,stroke:#222,stroke-width:1.5px;
  classDef util fill:#f5faff,stroke:#007acc,stroke-width:1.5px;
